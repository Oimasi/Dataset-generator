# -*- coding: utf-8 -*-
"""
Промпты для генерации простого датасета
"""

# Промпт для вытаскивания полей и их английских имен
EXTRACT_FIELDS_PROMPT = """Твоя задача — проанализировать запрос пользователя и извлечь из него поля для датасета.
Для каждого поля найди русский вариант, предложи ключ на английском языке в формате snake_case, и извлеки пример если он указан.

Требования:
- Ключи должны быть короткими и понятными.
- **Транслитерация запрещена!** (не `kollichestvo`, а `count`).
- Если в описании поля есть пример в скобках, обязательно его сохрани.
- Верни результат в формате: `русское_название:english_key:пример_если_есть,другое_название:another_key:другой_пример`
- Если примера нет, оставь третью часть пустой: `название:key:`

Пример 1:
Запрос: "самолеты: компания которая производит, модель, рейс (к примеру svo-ldo), колличество пасажиров, успешно или не успешно долетел (0 или 1)"
Результат: "компания производитель:manufacturer:,модель:model:,номер рейса:flight_number:SVO-LDO,количество пассажиров:passenger_count:,статус прибытия:arrival_status:0 или 1"

Пример 2:
Запрос: "фильмы: название (обязательно), год выпуска, жанр (может быть несколько), рейтинг (от 1 до 10)"
Результат: "название:title:,год выпуска:release_year:,жанр:genre:,рейтинг:rating:от 1 до 10"

Запрос:
\"{description}\"

Результат:"""

# Промпт для создания новых записей
DATA_GENERATION_PROMPT = """Создай новую запись JSON для темы: {description}

Используй точно такие же ключи: {keys}

Верни ТОЛЬКО JSON с новыми уникальными значениями:
{{
  {example_structure}
}}

Только JSON, без текста:"""

# Улучшенный промпт с учетом контекста
CONTEXTUAL_DATA_GENERATION_PROMPT = """Создай новую запись для датасета по теме: {description}

Поля:
{field_descriptions}

Пример структуры (создай ДРУГИЕ данные):
{example_record}

Верни ТОЛЬКО валидный JSON без дополнительного текста:
- Данные должны быть реалистичными
- Соответствовать теме: {description}
- НЕ копировать пример
- Проверь JSON синтаксис

JSON:"""

# Промпты под разные типы данных
DATASET_TYPE_PROMPTS = {
    "qa": """Создай пару вопрос-ответ:
- Вопрос должен быть конкретным и понятным
- Ответ должен быть информативным и полным
- Тематика: {description}""",
    
    "instruction": """Создай инструкцию с входными данными и результатом:
- Инструкция должна быть четкой и выполнимой
- Входные данные должны быть релевантными
- Результат должен соответствовать инструкции
- Тематика: {description}""",
    
    "dialog": """Создай диалог между участниками:
- Реплики должны быть естественными
- Диалог должен иметь логическую последовательность
- Учитывай роли участников
- Тематика: {description}""",
    
    "classification": """Создай данные для классификации:
- Текст должен четко относиться к указанной категории
- Категории должны быть различимыми
- Данные должны быть разнообразными
- Тематика: {description}"""
}

# Для починки сломанного JSON
JSON_REPAIR_PROMPT = """Следующий текст должен быть валидным JSON, но он содержит ошибки. Исправь его.
Убери любой лишний текст, комментарии и исправь все синтаксические ошибки (запятые, скобки, кавычки).

Сломанный текст:
{broken_json}

Исправленный и очищенный JSON:"""
